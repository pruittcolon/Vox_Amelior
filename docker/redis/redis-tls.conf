# Redis TLS Configuration
#
# This configuration enables TLS for Redis connections.
# Use with: redis-server /etc/redis/redis.conf
#
# Prerequisites:
# - Generate certificates in docker/ssl/ (already done for nginx)
# - Mount this config to /etc/redis/redis.conf in Redis container
# - Update clients to use rediss:// (TLS) instead of redis://

# Port configuration
# Disable non-TLS port to enforce encryption
port 0

# Enable TLS port
tls-port 6379

# Certificate files (mounted from docker/ssl/)
tls-cert-file /etc/redis/certs/nemo.crt
tls-key-file /etc/redis/certs/nemo.key

# CA certificate for client verification (optional - for mTLS)
# tls-ca-cert-file /etc/redis/certs/ca.crt

# Client authentication (optional)
# "no" - don't verify clients
# "optional" - accept both TLS and non-TLS clients
# "required" - require TLS clients to present valid certs
tls-auth-clients no

# TLS version requirements (minimum TLS 1.2 for security)
tls-protocols "TLSv1.2 TLSv1.3"

# Cipher suites (strong ciphers only)
tls-ciphersuites "TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256"
tls-ciphers "ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305"

# Prefer server ciphers
tls-prefer-server-ciphers yes

# Session caching
tls-session-caching yes
tls-session-cache-size 20480
tls-session-cache-timeout 300

# Replication TLS (if using Redis Cluster)
# tls-replication yes

# Cluster TLS (if using Redis Cluster)
# tls-cluster yes
