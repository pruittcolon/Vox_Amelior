<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Transcription Infrastructure Estimator</title>
    <meta name="description"
        content="Calculate VRAM, storage, and infrastructure requirements for large-scale call center transcription deployments.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg-primary: #f8fafc;
            --bg-secondary: #f1f5f9;
            --bg-tertiary: #e2e8f0;
            --bg-card: rgba(255, 255, 255, 0.95);
            --border-color: rgba(100, 116, 139, 0.15);
            --border-glow: rgba(99, 102, 241, 0.4);
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --accent-primary: #6366f1;
            --accent-secondary: #8b5cf6;
            --accent-gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);
            --success: #059669;
            --warning: #d97706;
            --error: #dc2626;
            --card-shadow: 0 4px 24px rgba(0, 0, 0, 0.06), 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(99, 102, 241, 0.08) 0%, transparent 50%), radial-gradient(ellipse 60% 40% at 80% 60%, rgba(139, 92, 246, 0.05) 0%, transparent 40%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1500px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1.5rem 0;
        }

        .logo-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
            box-shadow: var(--card-shadow);
        }

        .logo-badge::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
        }

        h1 {
            font-size: clamp(1.75rem, 4vw, 2.5rem);
            font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 1200px) {
            .grid-3 {
                grid-template-columns: 1fr;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            transition: all 0.2s ease;
        }

        .card:hover {
            border-color: var(--border-glow);
            box-shadow: var(--card-shadow), 0 0 30px rgba(99, 102, 241, 0.08);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.25rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }

        .card-icon {
            width: 36px;
            height: 36px;
            background: var(--accent-gradient);
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: white;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
        }

        .input-group {
            margin-bottom: 1.25rem;
        }

        .input-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }

        .input-label span:first-child {
            font-weight: 500;
            color: var(--text-primary);
        }

        .input-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            font-weight: 600;
            color: var(--accent-primary);
            background: rgba(99, 102, 241, 0.08);
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            border: 1px solid transparent;
            outline: none;
            width: 100px;
            text-align: right;
            transition: all 0.2s ease;
        }

        .input-value:focus {
            border-color: var(--accent-primary);
            background: rgba(99, 102, 241, 0.12);
        }

        .input-value::-webkit-inner-spin-button {
            -webkit-appearance: none;
        }

        .slider-container {
            position: relative;
            height: 6px;
            background: var(--bg-tertiary);
            border-radius: 3px;
        }

        .slider-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 3px;
            transition: width 0.1s ease;
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: transparent;
            cursor: pointer;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 2;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: white;
            border: 2px solid var(--accent-primary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }

        select {
            width: 100%;
            padding: 0.75rem 1rem;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        select:focus {
            border-color: var(--accent-primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .result-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1rem;
            transition: all 0.2s ease;
        }

        .result-item:hover {
            transform: translateY(-1px);
            border-color: var(--border-glow);
        }

        .result-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .result-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .result-value.accent {
            color: var(--accent-primary);
        }

        .result-value.success {
            color: var(--success);
        }

        .result-value.warning {
            color: var(--warning);
        }

        .result-unit {
            font-size: 0.75rem;
            font-weight: 400;
            color: var(--text-muted);
            margin-left: 0.25rem;
        }

        .recommendation-box {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%);
            border: 1px solid var(--border-glow);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .recommendation-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--accent-primary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .recommendation-content {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .recommendation-content strong {
            color: var(--text-primary);
        }

        .cost-breakdown {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .cost-item {
            text-align: center;
            padding: 1rem;
            background: white;
            border-radius: 0.75rem;
            border: 1px solid var(--border-color);
        }

        .cost-item-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .cost-item-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--success);
        }

        .formula-section {
            margin-top: 1.5rem;
        }

        .formula-card {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }

        .formula-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            user-select: none;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .formula-toggle {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-tertiary);
            border-radius: 0.25rem;
            color: var(--text-muted);
            font-size: 0.75rem;
            transition: transform 0.2s ease;
        }

        .formula-toggle.open {
            transform: rotate(180deg);
        }

        .formula-content {
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border-color);
            display: none;
        }

        .formula-content.open {
            display: block;
        }

        .formula-code {
            background: var(--bg-secondary);
            border-radius: 0.5rem;
            padding: 0.75rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-secondary);
            overflow-x: auto;
        }

        .formula-code .hl {
            color: var(--accent-primary);
        }

        .formula-code .val {
            color: var(--success);
        }

        .formula-code .op {
            color: var(--warning);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
        }

        th,
        td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-size: 0.7rem;
            letter-spacing: 0.05em;
        }

        tr:hover td {
            background: rgba(99, 102, 241, 0.03);
        }

        tr.selected td {
            background: rgba(99, 102, 241, 0.08);
            border-left: 2px solid var(--accent-primary);
        }

        .badge {
            display: inline-flex;
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .badge-success {
            background: rgba(5, 150, 105, 0.12);
            color: var(--success);
        }

        .badge-warning {
            background: rgba(217, 119, 6, 0.12);
            color: var(--warning);
        }

        .badge-error {
            background: rgba(220, 38, 38, 0.12);
            color: var(--error);
        }

        footer {
            text-align: center;
            padding: 1.5rem;
            color: var(--text-muted);
            font-size: 0.8rem;
            border-top: 1px solid var(--border-color);
            margin-top: 2rem;
        }

        .sources-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem 1rem;
            margin-top: 0.75rem;
        }

        .sources-list a {
            color: var(--text-secondary);
            text-decoration: none;
        }

        .sources-list a:hover {
            color: var(--accent-primary);
        }
    </style>
</head>

<body>
    <div class="bg-gradient"></div>
    <div class="container">
        <header>
            <div class="logo-badge">Enterprise Infrastructure Planning</div>
            <h1>Transcription Infrastructure Estimator</h1>
            <p class="subtitle">Calculate GPU, storage, and cost requirements for enterprise call center transcription
                with AI post-processing.</p>
        </header>

        <div class="grid-3">
            <!-- Configuration -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">1</div>
                    <h2 class="card-title">Call Center Configuration</h2>
                </div>
                <div class="input-group">
                    <div class="input-label"><span>Total Agents</span><input type="number" class="input-value"
                            id="agentsValue" value="75" min="1" max="100000" step="1"></div>
                    <div class="slider-container">
                        <div class="slider-fill" id="agentsFill"></div><input type="range" id="agents" min="1"
                            max="5000" value="75" step="5">
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-label"><span>Talk Time/Agent/Day</span><input type="number" class="input-value"
                            id="talkTimeValue" value="4" min="0.5" max="8" step="0.5"> hrs</div>
                    <div class="slider-container">
                        <div class="slider-fill" id="talkTimeFill"></div><input type="range" id="talkTime" min="0.5"
                            max="8" value="4" step="0.5">
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-label"><span>Peak Concurrency</span><input type="number" class="input-value"
                            id="peakPctValue" value="60" min="10" max="100" step="5">%</div>
                    <div class="slider-container">
                        <div class="slider-fill" id="peakPctFill"></div><input type="range" id="peakPct" min="10"
                            max="100" value="60" step="5">
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-label"><span>Batch Window</span><input type="number" class="input-value"
                            id="batchWindowValue" value="14" min="4" max="24" step="1"> hrs</div>
                    <div class="slider-container">
                        <div class="slider-fill" id="batchWindowFill"></div><input type="range" id="batchWindow" min="4"
                            max="24" value="14" step="1">
                    </div>
                </div>
            </div>

            <!-- Transcription Service -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">2</div>
                    <h2 class="card-title">Transcription Service</h2>
                </div>
                <div class="input-group">
                    <div class="input-label"><span>ASR Model</span></div>
                    <select id="asrModel">
                        <option value="parakeet" data-wer="6.05" data-vram="7" data-speed="600" data-streams="10">NVIDIA
                            Parakeet v2 (WER: 6.05%, 600x RTFx)</option>
                        <option value="whisper-fast" data-wer="7" data-vram="5" data-speed="40" data-streams="4">
                            faster-whisper Large (WER: 7%, 40x RTFx)</option>
                        <option value="whisper" data-wer="7" data-vram="10" data-speed="8" data-streams="2">Whisper
                            Large v3 (WER: 7%, 8x RTFx)</option>
                        <option value="assemblyai" data-wer="6.6" data-vram="0" data-speed="1" data-streams="999">
                            AssemblyAI (WER: 6.6%) Cloud</option>
                        <option value="deepgram" data-wer="8.6" data-vram="0" data-speed="1" data-streams="999">Deepgram
                            Nova-3 (WER: 8.6%) Cloud</option>
                    </select>
                </div>
                <div class="input-group">
                    <div class="input-label"><span>GPU Type</span></div>
                    <select id="gpuType">
                        <option value="rtx4090" data-vram="24" data-price="2500" data-watts="450" data-perf="1">RTX 4090
                            (24GB, $2,500)</option>
                        <option value="a10" data-vram="24" data-price="3200" data-watts="150" data-perf="0.8">A10 (24GB,
                            $3,200)</option>
                        <option value="l40s" data-vram="48" data-price="7500" data-watts="350" data-perf="1.5">L40S
                            (48GB, $7,500)</option>
                        <option value="a100-40" data-vram="40" data-price="10000" data-watts="300" data-perf="2">A100
                            40GB ($10,000)</option>
                        <option value="a100-80" data-vram="80" data-price="17000" data-watts="400" data-perf="2.2">A100
                            80GB ($17,000)</option>
                        <option value="h100" data-vram="80" data-price="35000" data-watts="700" data-perf="4">H100 80GB
                            ($35,000)</option>
                    </select>
                </div>
                <div class="input-group">
                    <div class="input-label"><span>Electricity Rate ($/kWh)</span><input type="number"
                            class="input-value" id="electricityRate" value="0.10" min="0.01" max="1" step="0.01"></div>
                </div>
            </div>

            <!-- AI Post-Processing -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">3</div>
                    <h2 class="card-title">AI Post-Processing</h2>
                </div>
                <div class="input-group">
                    <div class="input-label"><span>LLM Model</span></div>
                    <select id="llmModel">
                        <option value="none" data-params="0" data-vram="0" data-tps="0">None (Transcription Only)
                        </option>
                        <option value="gemma-2b" data-params="2" data-vram="4" data-tps="150">Gemma 2B (4GB, 150 tok/s)
                        </option>
                        <option value="gemma-9b" data-params="9" data-vram="18" data-tps="80">Gemma 3 9B (18GB, 80
                            tok/s)</option>
                        <option value="gemma-27b" data-params="27" data-vram="54" data-tps="40">Gemma 3 27B (54GB, 40
                            tok/s)</option>
                        <option value="llama-8b" data-params="8" data-vram="16" data-tps="90">Llama 3.1 8B (16GB, 90
                            tok/s)</option>
                        <option value="llama-70b" data-params="70" data-vram="140" data-tps="25">Llama 3.1 70B (140GB,
                            25 tok/s)</option>
                        <option value="gpt-120b" data-params="120" data-vram="240" data-tps="15">GPT 120B (240GB, 15
                            tok/s)</option>
                    </select>
                </div>
                <div class="input-group">
                    <div class="input-label"><span>Quantization</span></div>
                    <select id="quantization">
                        <option value="fp16" data-mult="1">FP16 (Full Precision)</option>
                        <option value="int8" data-mult="0.5">INT8 (50% VRAM, ~5% quality loss)</option>
                        <option value="int4" data-mult="0.25">INT4/GPTQ (25% VRAM, ~10% quality loss)</option>
                    </select>
                </div>
                <div class="input-group">
                    <div class="input-label"><span>Summary Length (tokens)</span><input type="number"
                            class="input-value" id="summaryTokens" value="200" min="50" max="2000" step="50"></div>
                </div>
            </div>
        </div>

        <div class="grid-2">
            <!-- Real-time Capacity (MAX) -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">RT</div>
                    <h2 class="card-title">Real-time Capacity (Maximum)</h2>
                </div>
                <div class="results-grid">
                    <div class="result-item">
                        <div class="result-label">Peak Concurrent Calls</div>
                        <div class="result-value accent" id="peakCalls">60<span class="result-unit">calls</span></div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Streams per GPU</div>
                        <div class="result-value success" id="streamsPerGpu">12<span class="result-unit">streams</span>
                        </div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">GPUs for 100% Coverage</div>
                        <div class="result-value warning" id="gpusRealtime">5<span class="result-unit">GPUs</span></div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Max Capacity</div>
                        <div class="result-value" id="maxCapacity">60<span class="result-unit">streams</span></div>
                    </div>
                </div>
                <div class="cost-breakdown" style="margin-top: 1rem;">
                    <div class="cost-item">
                        <div class="cost-item-label">Setup Cost</div>
                        <div class="cost-item-value warning" id="realtimeSetup">$15,000</div>
                    </div>
                    <div class="cost-item">
                        <div class="cost-item-label">Annual Cost</div>
                        <div class="cost-item-value" id="realtimeAnnual">$8,000</div>
                    </div>
                    <div class="cost-item">
                        <div class="cost-item-label">Per Agent/Mo</div>
                        <div class="cost-item-value" id="realtimePerAgent">$6.67</div>
                    </div>
                </div>
            </div>

            <!-- Daily Batch (MIN) -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">BT</div>
                    <h2 class="card-title">Daily Batch (Minimum GPUs)</h2>
                </div>
                <div class="results-grid">
                    <div class="result-item">
                        <div class="result-label">Daily Audio Hours</div>
                        <div class="result-value accent" id="dailyAudio">400<span class="result-unit">hrs</span></div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Processing Speed</div>
                        <div class="result-value" id="asrSpeed">10<span class="result-unit">x realtime</span></div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">GPU-Hours Needed</div>
                        <div class="result-value" id="gpuHoursDay">40<span class="result-unit">GPU-hrs</span></div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Min GPUs (Batch Window)</div>
                        <div class="result-value success" id="gpusBatch">3<span class="result-unit">GPUs</span></div>
                    </div>
                </div>
                <div class="cost-breakdown" style="margin-top: 1rem;">
                    <div class="cost-item">
                        <div class="cost-item-label">Setup Cost</div>
                        <div class="cost-item-value success" id="batchSetup">$9,000</div>
                    </div>
                    <div class="cost-item">
                        <div class="cost-item-label">Annual Cost</div>
                        <div class="cost-item-value" id="batchAnnual">$5,000</div>
                    </div>
                    <div class="cost-item">
                        <div class="cost-item-label">Per Agent/Mo</div>
                        <div class="cost-item-value" id="batchPerAgent">$4.17</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comparison Summary -->
        <div class="card" style="margin-bottom: 1.5rem;">
            <div class="card-header">
                <div class="card-icon">VS</div>
                <h2 class="card-title">Real-time vs Batch Comparison</h2>
            </div>
            <div class="results-grid">
                <div class="result-item">
                    <div class="result-label">Real-time GPUs</div>
                    <div class="result-value warning" id="compareRtGpus">5<span class="result-unit">GPUs</span></div>
                </div>
                <div class="result-item">
                    <div class="result-label">Batch GPUs</div>
                    <div class="result-value success" id="compareBatchGpus">3<span class="result-unit">GPUs</span></div>
                </div>
                <div class="result-item">
                    <div class="result-label">GPU Savings</div>
                    <div class="result-value accent" id="gpuSavings">40<span class="result-unit">%</span></div>
                </div>
                <div class="result-item">
                    <div class="result-label">Cost Savings</div>
                    <div class="result-value success" id="costSavings">$6,000<span class="result-unit">/setup</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Unit Economics -->
        <div class="card" style="margin-bottom: 1.5rem;">
            <div class="card-header">
                <div class="card-icon">$</div>
                <h2 class="card-title">Daily Unit Economics (Batch Mode)</h2>
            </div>
            <div class="results-grid">
                <div class="result-item">
                    <div class="result-label">Cost per Hour Audio</div>
                    <div class="result-value accent" id="costPerHour">$0.02<span class="result-unit">/hr</span></div>
                </div>
                <div class="result-item">
                    <div class="result-label">Cost per Conversation</div>
                    <div class="result-value" id="costPerConversation">$0.005<span class="result-unit">/call</span>
                    </div>
                </div>
                <div class="result-item">
                    <div class="result-label">Cost per Agent/Day</div>
                    <div class="result-value success" id="costPerAgentDay">$0.08<span class="result-unit">/agent</span>
                    </div>
                </div>
                <div class="result-item">
                    <div class="result-label">Daily Operating Cost</div>
                    <div class="result-value warning" id="dailyOpCost">$8.00<span class="result-unit">/day</span></div>
                </div>
            </div>
            <div class="cost-breakdown" style="margin-top: 1rem;">
                <div class="cost-item">
                    <div class="cost-item-label">Daily Conversations</div>
                    <div class="cost-item-value" id="dailyConversations">1,500</div>
                </div>
                <div class="cost-item">
                    <div class="cost-item-label">Avg Call Duration</div>
                    <div class="cost-item-value" id="avgCallDuration">16 min</div>
                </div>
                <div class="cost-item">
                    <div class="cost-item-label">Transcripts/Agent/Day</div>
                    <div class="cost-item-value" id="transcriptsPerAgent">15</div>
                </div>
            </div>
        </div>

        <!-- Recommendation -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">*</div>
                <h2 class="card-title">AI Recommendation Summary</h2>
            </div>
            <div class="recommendation-box" id="recommendationBox">
                <div class="recommendation-title">Recommended Configuration</div>
                <div class="recommendation-content" id="recommendationContent">Loading...</div>
            </div>
        </div>

        <!-- Formula Transparency -->
        <div class="card formula-section">
            <div class="card-header">
                <div class="card-icon">f</div>
                <h2 class="card-title">Human-in-the-Loop: Calculation Breakdown</h2>
            </div>
            <div class="formula-card">
                <div class="formula-header" onclick="toggleFormula('workload')"><span>Workload Calculations</span><span
                        class="formula-toggle" id="workloadToggle">v</span></div>
                <div class="formula-content" id="workloadContent">
                    <div class="formula-code">
                        <span class="hl">Daily Audio</span> <span class="op">=</span> <span class="val"
                            id="f_emp">1,000</span> employees <span class="op">x</span> <span class="val"
                            id="f_hrs">6</span> hrs <span class="op">=</span> <span class="val"
                            id="f_daily">6,000</span> hrs<br>
                        <span class="hl">Calls/Day</span> <span class="op">=</span> <span class="val"
                            id="f_daily2">6,000</span> hrs <span class="op">x</span> 60 <span class="op">/</span> <span
                            class="val" id="f_dur">8</span> min <span class="op">=</span> <span class="val"
                            id="f_calls">45,000</span> calls<br>
                        <span class="hl">Words/Call</span> <span class="op">=</span> <span class="val"
                            id="f_dur2">8</span> min <span class="op">x</span> 150 WPM <span class="op">=</span> <span
                            class="val" id="f_wpc">1,200</span> words<br>
                        <span class="hl">Words/Year</span> <span class="op">=</span> <span class="val"
                            id="f_calls2">45,000</span> <span class="op">x</span> 260 days <span class="op">x</span>
                        <span class="val" id="f_wpc2">1,200</span> <span class="op">=</span> <span class="val"
                            id="f_twords">14.04B</span>
                    </div>
                </div>
            </div>
            <div class="formula-card">
                <div class="formula-header" onclick="toggleFormula('gpu')"><span>GPU and Cost Calculations</span><span
                        class="formula-toggle" id="gpuToggle">v</span></div>
                <div class="formula-content" id="gpuContent">
                    <div class="formula-code">
                        <span class="hl">GPU Hours/Day</span> <span class="op">=</span> <span class="val"
                            id="f_audio">6,000</span> hrs <span class="op">/</span> <span class="val"
                            id="f_speed">10</span>x speed <span class="op">=</span> <span class="val"
                            id="f_gpuh">600</span> GPU-hrs<br>
                        <span class="hl">GPUs Needed</span> <span class="op">=</span> ceil(<span class="val"
                            id="f_gpuh2">600</span> <span class="op">/</span> 24) <span class="op">=</span> <span
                            class="val" id="f_gpus">25</span> GPUs<br>
                        <span class="hl">Hardware Cost</span> <span class="op">=</span> <span class="val"
                            id="f_gpus2">25</span> <span class="op">x</span> $<span class="val"
                            id="f_price">2,500</span> <span class="op">=</span> $<span class="val"
                            id="f_hwcost">62,500</span><br>
                        <span class="hl">Power (kW)</span> <span class="op">=</span> <span class="val"
                            id="f_gpus3">25</span> <span class="op">x</span> <span class="val" id="f_watts">450</span>W
                        <span class="op">=</span> <span class="val" id="f_kw">11.25</span> kW<br>
                        <span class="hl">Electricity/Year</span> <span class="op">=</span> <span class="val"
                            id="f_kw2">11.25</span> kW <span class="op">x</span> 8760 hrs <span class="op">x</span>
                        $<span class="val" id="f_rate">0.10</span> <span class="op">x</span> 1.58 PUE <span
                            class="op">=</span> $<span class="val" id="f_elec">15,640</span>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Infrastructure cost estimates based on wholesale enterprise pricing. WER data from NVIDIA, HuggingFace,
                and vendor benchmarks (2024).</p>
            <div class="sources-list">
                <a href="https://nvidia.com/nemo">NVIDIA NeMo</a>
                <a href="https://huggingface.co/spaces/hf-audio/open_asr_leaderboard">HuggingFace ASR</a>
                <a href="https://massedcompute.com">Massed Compute</a>
            </div>
        </footer>
    </div>

    <script>
        const PUE = 1.58;
        const RACK_BASE_COST = 5000;
        const RACK_PER_GPU = 400;

        const els = {
            agents: document.getElementById('agents'),
            agentsValue: document.getElementById('agentsValue'),
            talkTime: document.getElementById('talkTime'),
            talkTimeValue: document.getElementById('talkTimeValue'),
            peakPct: document.getElementById('peakPct'),
            peakPctValue: document.getElementById('peakPctValue'),
            batchWindow: document.getElementById('batchWindow'),
            batchWindowValue: document.getElementById('batchWindowValue'),
            asrModel: document.getElementById('asrModel'),
            gpuType: document.getElementById('gpuType'),
            electricityRate: document.getElementById('electricityRate'),
            llmModel: document.getElementById('llmModel'),
            quantization: document.getElementById('quantization')
        };

        function formatNum(n) {
            if (n >= 1e9) return (n / 1e9).toFixed(2) + 'B';
            if (n >= 1e6) return (n / 1e6).toFixed(2) + 'M';
            if (n >= 1e3) return n.toLocaleString();
            return Math.round(n).toString();
        }

        function formatCurrency(n) {
            return '$' + Math.round(n).toLocaleString();
        }

        function updateFill(slider, fillId) {
            const fill = document.getElementById(fillId);
            if (fill && slider) {
                const pct = ((slider.value - slider.min) / (slider.max - slider.min)) * 100;
                fill.style.width = pct + '%';
            }
        }

        function getSelectedData(select) {
            const opt = select.options[select.selectedIndex];
            const data = {};
            for (const attr of opt.attributes) {
                if (attr.name.startsWith('data-')) {
                    const key = attr.name.replace('data-', '');
                    data[key] = isNaN(parseFloat(attr.value)) ? attr.value : parseFloat(attr.value);
                }
            }
            return data;
        }

        function calculate(source = 'slider') {
            // Get input values
            const agents = source === 'input'
                ? Math.max(1, parseFloat(els.agentsValue.value) || 100)
                : parseFloat(els.agents.value) || 100;
            const talkTime = source === 'input'
                ? Math.max(0.5, Math.min(8, parseFloat(els.talkTimeValue.value) || 4))
                : parseFloat(els.talkTime.value) || 4;
            const peakPct = source === 'input'
                ? Math.min(100, Math.max(10, parseFloat(els.peakPctValue.value) || 60))
                : parseFloat(els.peakPct.value) || 60;
            const batchWindow = source === 'input'
                ? Math.min(24, Math.max(4, parseFloat(els.batchWindowValue.value) || 14))
                : parseFloat(els.batchWindow.value) || 14;
            const electricityRate = parseFloat(els.electricityRate.value) || 0.10;

            // Sync slider/input pairs
            if (source === 'input') {
                els.agents.value = Math.min(agents, 5000);
                els.talkTime.value = talkTime;
                els.peakPct.value = peakPct;
                els.batchWindow.value = batchWindow;
            } else {
                els.agentsValue.value = agents;
                els.talkTimeValue.value = talkTime;
                els.peakPctValue.value = peakPct;
                els.batchWindowValue.value = batchWindow;
            }
            updateFill(els.agents, 'agentsFill');
            updateFill(els.talkTime, 'talkTimeFill');
            updateFill(els.peakPct, 'peakPctFill');
            updateFill(els.batchWindow, 'batchWindowFill');

            // Get dropdown data
            const asr = getSelectedData(els.asrModel);
            const gpu = getSelectedData(els.gpuType);
            const llm = getSelectedData(els.llmModel);
            const quant = getSelectedData(els.quantization);
            const isCloud = asr.vram === 0;

            // Real-time: concurrent streams per GPU (limited by model architecture, not just VRAM)
            // Parakeet ~10 streams, faster-whisper ~4, Whisper ~2 per GPU
            const streamsPerGpu = asr.streams || Math.floor(gpu.vram / (asr.vram || 7));

            // Real-time capacity calculation
            const peakCalls = Math.ceil(agents * (peakPct / 100));
            const gpusRealtime = isCloud ? 0 : Math.max(1, Math.ceil(peakCalls / streamsPerGpu));
            const maxCapacity = gpusRealtime * streamsPerGpu;

            // Batch processing: RTFx = hours of audio processed per GPU-hour
            // Parakeet 600x means 1 GPU processes 600 hrs audio in 1 hr
            const dailyAudioHours = agents * talkTime;
            const asrSpeed = asr.speed || 100; // RTFx: 600 for Parakeet, 40 for faster-whisper
            const gpuHoursNeeded = dailyAudioHours / asrSpeed;
            const gpusBatch = isCloud ? 0 : Math.max(1, Math.ceil(gpuHoursNeeded / batchWindow));

            // LLM VRAM requirement (added to both scenarios)
            const llmVramNeeded = (llm.vram || 0) * (quant.mult || 1);
            const gpusForLLM = llm.params > 0 ? Math.ceil(llmVramNeeded / gpu.vram) : 0;

            // Cost calculations for Real-time
            const totalGpusRealtime = gpusRealtime + gpusForLLM;
            const realtimeHardware = totalGpusRealtime * gpu.price;
            const realtimeRack = RACK_BASE_COST + (totalGpusRealtime * RACK_PER_GPU);
            const realtimeSetup = realtimeHardware + realtimeRack;
            const realtimePowerKw = (totalGpusRealtime * gpu.watts) / 1000;
            const realtimeElectricity = realtimePowerKw * 8760 * electricityRate * PUE;
            const realtimeMaintenance = realtimeSetup * 0.05;
            const realtimeAnnual = realtimeElectricity + realtimeMaintenance;
            const realtimePerAgent = (realtimeAnnual / 12) / agents;

            // Cost calculations for Batch
            const totalGpusBatch = gpusBatch + gpusForLLM;
            const batchHardware = totalGpusBatch * gpu.price;
            const batchRack = RACK_BASE_COST + (totalGpusBatch * RACK_PER_GPU);
            const batchSetup = batchHardware + batchRack;
            const batchPowerKw = (totalGpusBatch * gpu.watts) / 1000;
            const batchElectricity = batchPowerKw * 8760 * electricityRate * PUE;
            const batchMaintenance = batchSetup * 0.05;
            const batchAnnual = batchElectricity + batchMaintenance;
            const batchPerAgent = (batchAnnual / 12) / agents;

            // Comparison calculations
            const gpuSavings = totalGpusRealtime > 0
                ? Math.round((1 - totalGpusBatch / totalGpusRealtime) * 100)
                : 0;
            const costSavings = realtimeSetup - batchSetup;

            // Update Real-time Capacity section
            document.getElementById('peakCalls').innerHTML = peakCalls + '<span class="result-unit">calls</span>';
            document.getElementById('streamsPerGpu').innerHTML = (isCloud ? 'N/A' : streamsPerGpu) + '<span class="result-unit">' + (isCloud ? '' : 'streams') + '</span>';
            document.getElementById('gpusRealtime').innerHTML = (isCloud ? 'Cloud' : totalGpusRealtime) + '<span class="result-unit">' + (isCloud ? '' : 'GPUs') + '</span>';
            document.getElementById('maxCapacity').innerHTML = (isCloud ? 'Unlimited' : maxCapacity) + '<span class="result-unit">' + (isCloud ? '' : 'streams') + '</span>';
            document.getElementById('realtimeSetup').textContent = isCloud ? 'N/A' : formatCurrency(realtimeSetup);
            document.getElementById('realtimeAnnual').textContent = isCloud ? 'N/A' : formatCurrency(realtimeAnnual);
            document.getElementById('realtimePerAgent').textContent = isCloud ? 'N/A' : '$' + realtimePerAgent.toFixed(2);

            // Update Daily Batch section
            document.getElementById('dailyAudio').innerHTML = formatNum(dailyAudioHours) + '<span class="result-unit">hrs</span>';
            document.getElementById('asrSpeed').innerHTML = asrSpeed + '<span class="result-unit">x realtime</span>';
            document.getElementById('gpuHoursDay').innerHTML = (isCloud ? 'N/A' : formatNum(gpuHoursNeeded)) + '<span class="result-unit">' + (isCloud ? '' : 'GPU-hrs') + '</span>';
            document.getElementById('gpusBatch').innerHTML = (isCloud ? 'Cloud' : totalGpusBatch) + '<span class="result-unit">' + (isCloud ? '' : 'GPUs') + '</span>';
            document.getElementById('batchSetup').textContent = isCloud ? 'N/A' : formatCurrency(batchSetup);
            document.getElementById('batchAnnual').textContent = isCloud ? 'N/A' : formatCurrency(batchAnnual);
            document.getElementById('batchPerAgent').textContent = isCloud ? 'N/A' : '$' + batchPerAgent.toFixed(2);

            // Update Comparison section
            document.getElementById('compareRtGpus').innerHTML = (isCloud ? 'Cloud' : totalGpusRealtime) + '<span class="result-unit">' + (isCloud ? '' : 'GPUs') + '</span>';
            document.getElementById('compareBatchGpus').innerHTML = (isCloud ? 'Cloud' : totalGpusBatch) + '<span class="result-unit">' + (isCloud ? '' : 'GPUs') + '</span>';
            document.getElementById('gpuSavings').innerHTML = (isCloud ? 'N/A' : gpuSavings) + '<span class="result-unit">' + (isCloud ? '' : '%') + '</span>';
            document.getElementById('costSavings').innerHTML = (isCloud ? 'N/A' : formatCurrency(costSavings)) + '<span class="result-unit">' + (isCloud ? '' : '/setup') + '</span>';

            // Unit Economics calculations (using batch mode for daily operations)
            // Industry data: Credit unions average 60-70 calls/agent/day, AHT 6-9 min (target 7 min)
            const avgCallMinutes = 7; // Credit union industry benchmark AHT
            const callsPerAgent = Math.round((talkTime * 60) / avgCallMinutes); // Calls based on talk time / AHT
            const dailyConversations = agents * callsPerAgent;
            const transcriptsPerAgent = callsPerAgent;
            const dailyOpCost = batchAnnual / 365;
            const costPerHour = dailyAudioHours > 0 ? dailyOpCost / dailyAudioHours : 0;
            const costPerConversation = dailyConversations > 0 ? dailyOpCost / dailyConversations : 0;
            const costPerAgentDay = agents > 0 ? dailyOpCost / agents : 0;

            // Update Unit Economics section
            document.getElementById('costPerHour').innerHTML = (isCloud ? 'See Provider' : '$' + costPerHour.toFixed(4)) + '<span class="result-unit">' + (isCloud ? '' : '/hr') + '</span>';
            document.getElementById('costPerConversation').innerHTML = (isCloud ? 'See Provider' : '$' + costPerConversation.toFixed(4)) + '<span class="result-unit">' + (isCloud ? '' : '/call') + '</span>';
            document.getElementById('costPerAgentDay').innerHTML = (isCloud ? 'See Provider' : '$' + costPerAgentDay.toFixed(4)) + '<span class="result-unit">' + (isCloud ? '' : '/agent') + '</span>';
            document.getElementById('dailyOpCost').innerHTML = (isCloud ? 'See Provider' : formatCurrency(dailyOpCost)) + '<span class="result-unit">' + (isCloud ? '' : '/day') + '</span>';
            document.getElementById('dailyConversations').textContent = formatNum(dailyConversations);
            document.getElementById('avgCallDuration').textContent = avgCallMinutes + ' min';
            document.getElementById('transcriptsPerAgent').textContent = transcriptsPerAgent;

            // Update recommendation
            const gpuName = els.gpuType.options[els.gpuType.selectedIndex].text.split('(')[0].trim();
            const asrName = els.asrModel.options[els.asrModel.selectedIndex].text.split('(')[0].trim();
            let rec = '';
            if (isCloud) {
                rec = `For <strong>${agents} agents</strong> generating <strong>${formatNum(dailyAudioHours)}hrs</strong>/day, cloud <strong>${asrName}</strong> is recommended. No GPU investment required.`;
            } else {
                rec = `<strong>${agents} agents</strong> x <strong>${talkTime}hrs</strong>/day = <strong>${formatNum(dailyAudioHours)}hrs</strong> daily audio<br><br>`;
                rec += `<strong>Real-time (${peakPct}% peak):</strong> ${totalGpusRealtime}x ${gpuName} (${streamsPerGpu} streams/GPU)<br>`;
                rec += `<strong>Daily Batch (${batchWindow}hr window):</strong> ${totalGpusBatch}x ${gpuName}<br><br>`;
                rec += `<strong>Savings with Batch:</strong> ${gpuSavings}% fewer GPUs, ${formatCurrency(costSavings)} lower setup cost`;
                if (gpusForLLM > 0) {
                    const llmName = els.llmModel.options[els.llmModel.selectedIndex].text.split('(')[0].trim();
                    rec += `<br><br><strong>LLM:</strong> +${gpusForLLM} GPU(s) for ${llmName} (${Math.ceil(llmVramNeeded)}GB)`;
                }
            }
            document.getElementById('recommendationContent').innerHTML = rec;
        }

        // Event listeners for all inputs
        ['agents', 'talkTime', 'peakPct', 'batchWindow'].forEach(id => {
            if (els[id]) els[id].addEventListener('input', () => calculate('slider'));
        });
        ['agentsValue', 'talkTimeValue', 'peakPctValue', 'batchWindowValue', 'electricityRate'].forEach(id => {
            if (els[id]) els[id].addEventListener('input', () => calculate('input'));
        });
        ['asrModel', 'gpuType', 'llmModel', 'quantization'].forEach(id => {
            if (els[id]) els[id].addEventListener('change', () => calculate('slider'));
        });

        // Initial calculation
        calculate('slider');
    </script>
</body>

</html>